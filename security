Spring Web Security

로그인 처리를 하는데 사용되는 스프링프레임워크의 기능
사용자의 권한, 등급을 기반으로 로그인 체크를 사용
우리는 기본적으로 쿠키를 이용하거나 세션을 이용하는 방식으로 로그인 처리
스프링에서는 + 인터셉터를 이용해서 로그인 처리

인터셉터 vs필터
필터는 JSP의 서블릿에서 사용되는 개념
서블릿이 요청을 받아서 처리하기 전에 필요한 동작을 필터에서 해줬었다.
인코딩 작업, 널값작업후에 다음 단계로 요청을 전달
필터는 스프링과 무관한 서블릿의 자원

필터	 		서블릿 범위
요청====>>>  [ ㅣ필터 ㅣ ==> 요청 중간 처리==> |서블릿|}

인터셉터
			서블릿 범위			스프링범위
요청---->>> [|필터|---> [|인터셉터|==>	|컨트롤러|			]] 


인터셉터는 스프링의 빈으로 관리되는 필터
인터셉터를 사용하면 스프링 내부에서 관리되는 모든 자원들을 활용할수 있게 된다

스프링 시큐리티 라이브러리를 추가하고(pom.xml 에 dependency)
config, web, core+
스프링 시큐리티 전용 설정 파일(xml)을 root-context.xml이 있는 위치에 추가
스프링 MVC에서 시큐리티 기능을 사용하기위해서 시큐리티가 서블릿 범위에서 동작하도록
web.xml에 필터로 등록

스프링 시큐리티에서 가장 중요한 개념두개
인증(Authentication), 권한(Authorization)

인증: 자기 자신을 증명
권한: 다른 사람이 자격을 부여

어떤회사에 고장난 데이터베이스를 고치기 위해 방문
회사입구에서 누구인지물어봄
누군지 밝힘
본인인증

인증성공후 회사내부에 들어가 담당자를만나 데이터베이스의 접근권한등의 정보를 얻어야함
권하을 부여받아서 데이터베이스를 고친다

스프링 시큐리티 설정파일 작성할때 추가했던
AuthenticationManager -> 애가 인증을 담당

접근제한설정

스프링 시큐리티와 jdbc를 같이 이용하는 방법
1) 스플링 시큐리티에서 지정한 형식으로 테이블을 생성해서 사용
2) 우리가 작성한 데이터베이스를 이용하는 방식

인증/권한을 위해 테이블을 생성
tbl_member : 회원정보
tbl_member_auth :회원의 권한
패스워드를 그냥 그대로 사용했는데 인코딩까지
암호화처리

데이터베이스에 저장된 회원정보를 통해 인증을 할건데 필요한 쿼리2개
사용자 정보를 인증하는데 필요한 쿼리
그 사용자의 권한을 확인하는데 필요한 쿼리
id 가 admin90인 사용자의 정보를 가져오는 쿼리
id 가 admin90인 사용자의